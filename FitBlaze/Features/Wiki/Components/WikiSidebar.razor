@inject FitBlaze.Data.PageService PageService
@using FitBlaze.Features.Wiki.Models

<div class="wiki-sidebar">
    <div class="p-3">
        <h5 class="sidebar-heading">Wiki Pages</h5>
        <a href="/wiki/create" class="btn btn-sm btn-success w-100 mb-3">+ New Page</a>

        @if (pages == null)
        {
            <div class="text-center text-muted">
                <small>Loading...</small>
            </div>
        }
        else if (!pages.Any())
        {
            <div class="text-muted small text-center">
                No pages found.
            </div>
        }
        else
        {
            <div class="list-group list-group-flush">
                @foreach (var p in pages)
                {
                    <a href="/wiki/@p.Slug" class="list-group-item list-group-item-action py-2 text-truncate" title="@p.Title">
                        @p.Title
                    </a>
                }
            </div>
        }
    </div>
</div>

<style>
    .wiki-sidebar {
        border-right: 1px solid #dee2e6;
        height: 100%;
        overflow-y: auto;
        background-color: #f8f9fa;
    }
    .sidebar-heading {
        margin-bottom: 1rem;
    }
</style>

@code {
    private List<Page>? pages;

    protected override async Task OnInitializedAsync()
    {
        pages = await PageService.GetPagesAsync();
    }
}
